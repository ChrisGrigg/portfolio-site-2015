var HEATHER=HEATHER||{};(function(){HEATHER.INTRO_PAGE="intro";HEATHER.WORK_PAGE="work";HEATHER.PROFILE_PAGE="profile";HEATHER.CONTACT_PAGE="contact"})();HEATHER=HEATHER||{};(function(){$(".workItemDesc").hide();console.log("width "+$(window).width()+" height "+$(window).height());$(window).resize(function(){console.log("width "+$(window).width()+" height "+$(window).height())})})();angular.module("site",["ngRoute"]).config(function(c){console.log("adding routes");c.when("/",{}).when("/"+HEATHER.WORK_PAGE,{}).when("/"+HEATHER.PROFILE_PAGE,{}).when("/"+HEATHER.CONTACT_PAGE,{}).when("/"+HEATHER.WORK_PAGE+"/:id",{templateUrl:"templates/work-description-template.html",controller:"WorkDescriptionController",controllerAs:"workDescCtrl"}).otherwise({redirectTo:"/"})});angular.module("site").factory("Work",["$http",function(c){var d;return{all:function(){d||(d=c.get("json/work.json"));return d}}}]);angular.module("site").factory("Scroll",["$location",function(c){function d(){var a=$("#content")[0].scrollTop+$("#content")[0].offsetTop,e=$("#content")[0].scrollHeight-$("#content")[0].clientHeight;return 0<a&&a>=e-100?HEATHER.CONTACT_PAGE:a>=$("#"+HEATHER.PROFILE_PAGE)[0].offsetTop&&a<$("#"+HEATHER.CONTACT_PAGE)[0].offsetTop?HEATHER.PROFILE_PAGE:a>=$("#"+HEATHER.WORK_PAGE)[0].offsetTop&&a<$("#"+HEATHER.PROFILE_PAGE)[0].offsetTop?HEATHER.WORK_PAGE:""}function g(a){var e=c.path(),e=e.substring(e.indexOf("/")+
1);$("header nav button").removeClass("selected");$("."+d()+"Btn").blur();$("."+e+"Btn").addClass("selected");var e=a.offsetParent.offsetTop,b=$("#content")[0].offsetTop;a=a.id===HEATHER.INTRO_PAGE?0:a.offsetTop-b-e;e=$("#content")[0].scrollHeight-$("#content")[0].clientHeight;a=Math.min(a,e);h($("#content")[0],a,750,function(){setTimeout(function(){$("#content").on("scroll",l)},200)})}function h(a,e,d,c){0>d||(k[a.id]={element:a,to:e,duration:d,callback:c},k[a.id].interval=setInterval(b,10,a.id))}
function b(a){a=k[a];var b=a.element,d=a.to,c=a.duration;b.scrollTop+=(d-b.scrollTop)/c*10;a.duration-=10;0==c&&(clearInterval(a.interval),b.scrollTop=d,a.callback&&a.callback.call())}function l(){var a=c.path(),a=a.substring(a.indexOf("/")+1),b=d();b!==a&&(console.log("new route "+b),window.location.href=f+b,$("header nav button").removeClass("selected"),$("."+a+"Btn").blur(),$("."+b+"Btn").addClass("selected"))}var k={},f=window.location.href;-1!=f.indexOf(".html")?f=f.substring(0,f.indexOf(".html")+
5)+"#/":-1!=f.indexOf(".net")&&(f=f.substring(0,f.indexOf(".net")+4)+"#/");$("#content").on("scroll",l);return{getCurrentPage:d,setCurrentPage:function(a){$("#content").off("scroll");a=$("#"+a)[0];a.offsetParent?g(a):setTimeout(g,1E3,a)}}}]);angular.module("site").controller("IntroCtrl",["$http",function(c){var d=this;c.get("json/intro.json").success(function(c){console.log("intro.json loaded!");d.intro=c.data}).error(function(){alert("error loading intro json")})}]);angular.module("site").controller("NavCtrl",["$location","$rootScope","Scroll",function(c,d,g){var h="";this.onNavBtnClick=function(b){c.path(b)};d.$on("$routeChangeSuccess",function(b){b=c.path();b=b.substring(b.indexOf("/")+1);var d=g.getCurrentPage();h!==d&&-1!==h.indexOf(HEATHER.WORK_PAGE)&&-1!==d.indexOf(HEATHER.WORK_PAGE)&&($(".workItemDesc").removeClass("fade-in").addClass("fade-out"),setTimeout(function(){$(".workItemDesc").removeClass("fade-out").hide()},500));b!==d&&(console.log("route change from "+
d+" to "+b),""==b&&(b=HEATHER.INTRO_PAGE),b!==HEATHER.INTRO_PAGE&&b!==HEATHER.WORK_PAGE&&b!==HEATHER.PROFILE_PAGE&&b!==HEATHER.CONTACT_PAGE||g.setCurrentPage(b));h=b})}]);angular.module("site").controller("ProfileCtrl",["$http",function(c){var d=this;c.get("json/profile.json").success(function(c){console.log("profile.json loaded!");d.profile=c.data}).error(function(){alert("error loading profile json")});this.onViewCV=function(){window.open("assets/pdfs/Heather_Roberts_CV.pdf","_blank")}}]);angular.module("site").controller("WorkController",["$location","Work",function(c,d){var g=this;d.all().success(function(d){console.log("work.json loaded!");g.workItems=d.data}).error(function(){alert("error loading work json")})}]);angular.module("site").controller("WorkDescriptionController",["$routeParams","$scope","$location","Work",function(c,d,g,h){var b=c.id;console.log("load details for "+b);$(".workItemDesc").show().addClass("fade-in");setTimeout(function(){$(document).click(function(b){$(document).off("click");$(".workItemDesc button").trigger("click")})},200);h.all().success(function(c){$.each(c.data,function(c,f){f.id===b&&(d.work=f)})}).error(function(){alert("error loading work json")});this.closeDesc=function(){$(".workItemDesc").removeClass("fade-in").addClass("fade-out");
setTimeout(function(){$(".workItemDesc").removeClass("fade-out").hide()},500);g.path(HEATHER.WORK_PAGE)}}]);angular.module("site").directive("paper",function(){return{restrict:"E",templateUrl:"templates/paper-template.html",scope:{title:"@",content:"@",colour:"@"},transclude:!0}});angular.module("site").directive("workItem",function(){return{restrict:"E",templateUrl:"templates/work-item-template.html",scope:{work:"="},controller:function(c,d){c.loadWorkDesc=function(c){d.path("/"+HEATHER.WORK_PAGE+"/"+c.id)}}}});angular.module("site").directive("laceRibbons",function(){return{restrict:"E",templateUrl:"templates/lace-ribbons-template.html",scope:{ribbons:"@"},transclude:!0}});angular.module("site").directive("flowers",function(){return{restrict:"E",templateUrl:"templates/flowers-template.html",scope:{pos:"@"}}});
